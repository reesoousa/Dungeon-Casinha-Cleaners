<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon Cleaners RPG</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <header id="app-header" style="display:none;">
        <div class="logo">
            <i data-lucide="castle" style="width: 26px; height: 26px;"></i>
            <span>DUNGEON CLEANERS</span>
        </div>
        <div class="gold-display">
            <i data-lucide="coins" style="width: 22px; height: 22px;"></i>
            <span id="total-gold">0</span>
        </div>
    </header>

    <div class="container">
        <!-- SETUP SCREEN -->
        <div id="screen-setup" class="screen active">
            <div class="setup-box">
                <h1>
                    <i data-lucide="sword" style="width: 28px; height: 28px;"></i>
                    Bem-vindos!
                </h1>
                <p>Quem vai limpar a masmorra hoje?</p>
                <div style="margin-top: 30px;">
                    <input type="text" id="p1-name" placeholder="Nome do Jogador 1" value="Renan">
                    <input type="text" id="p2-name" placeholder="Nome do Jogador 2" value="Daisy">
                    <button class="btn btn-primary btn-block" onclick="startGame()">
                        <i data-lucide="play" style="width: 22px; height: 22px;"></i>
                        Começar Aventura
                    </button>
                </div>
            </div>
        </div>

        <!-- DUNGEON SCREEN -->
        <div id="screen-dungeon" class="screen">
            <div class="actions-area">
                <button class="btn btn-info" onclick="openTaskModal()">
                    <i data-lucide="sword" style="width: 24px; height: 24px;"></i>
                    Invocar Tarefa
                </button>
                <button class="btn btn-primary" onclick="openManagementModal()">
                    <i data-lucide="settings" style="width: 24px; height: 24px;"></i>
                    Gerenciar
                </button>
            </div>

            <div class="section-title">
                <i data-lucide="flame" style="width: 30px; height: 30px;"></i>
                <span>Monstros na Mesa</span>
            </div>

            <div id="active-monsters" class="card-grid"></div>

            <div id="empty-dungeon" class="empty-state">
                <div class="empty-state-icon">
                    <i data-lucide="castle" style="width: 64px; height: 64px;"></i>
                </div>
                <div class="empty-state-text">
                    A casa está limpa... por enquanto.<br>
                    <strong>Clique em "Invocar Tarefa"</strong> para começar!
                </div>
            </div>
        </div>

        <!-- TAVERN SCREEN -->
        <div id="screen-tavern" class="screen">
            <div class="section-title">
                <i data-lucide="shopping-bag" style="width: 30px; height: 30px;"></i>
                <span>Recompensas</span>
            </div>

            <div class="shop-item add-reward-card">
                <div class="shop-item-info">
                    <h3>Nova Recompensa</h3>
                    <p>Adicionar item à Wishlist</p>
                </div>
                <button class="btn" style="padding: 12px 20px;" onclick="addCustomReward()">
                    <i data-lucide="plus" style="width: 22px; height: 22px;"></i>
                </button>
            </div>

            <div id="shop-list"></div>
        </div>

        <!-- HISTORY SCREEN -->
        <div id="screen-history" class="screen">
            <div class="section-title">
                <i data-lucide="scroll-text" style="width: 30px; height: 30px;"></i>
                <span>Histórico</span>
            </div>

            <div class="history-tabs">
                <div class="history-tab active" onclick="switchHistoryTab('activity')">
                    <i data-lucide="check-circle" style="width: 18px; height: 18px;"></i>
                    <span>Atividades</span>
                </div>
                <div class="history-tab" onclick="switchHistoryTab('purchase')">
                    <i data-lucide="shopping-cart" style="width: 18px; height: 18px;"></i>
                    <span>Compras</span>
                </div>
            </div>

            <div id="activity-log" class="history-list active"></div>
            <div id="purchase-history" class="history-list"></div>
        </div>
    </div>

    <!-- MODAL DE SELEÇÃO DE TAREFA -->
    <div id="task-modal" class="modal-overlay" onclick="handleModalOutsideClick(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <h2>
                <i data-lucide="cards" style="width: 24px; height: 24px;"></i>
                Escolha uma Tarefa
            </h2>
            <p class="modal-subtitle">Toque em uma das cartas para invocar o monstro</p>
            <div id="task-selection-cards" class="task-selection-grid"></div>
            <button class="btn btn-block" onclick="closeTaskModal()">
                <i data-lucide="x" style="width: 20px; height: 20px;"></i>
                Cancelar
            </button>
        </div>
    </div>

    <!-- MODAL DE GERENCIAMENTO -->
    <div id="management-modal" class="modal-overlay" onclick="handleManagementOutsideClick(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <h2>
                <i data-lucide="settings" style="width: 24px; height: 24px;"></i>
                Gerenciar Monstros
            </h2>
            <p class="modal-subtitle">Remova tarefas da mesa ou limpe tudo</p>

            <div class="management-list" id="management-list"></div>

            <button class="btn btn-danger btn-block" onclick="clearAllMonsters()" style="margin-bottom: 10px;">
                <i data-lucide="trash-2" style="width: 20px; height: 20px;"></i>
                Limpar Todos os Monstros
            </button>

            <button class="btn btn-block" onclick="closeManagementModal()">
                <i data-lucide="x" style="width: 20px; height: 20px;"></i>
                Fechar
            </button>
        </div>
    </div>

    <!-- NAVIGATION -->
    <nav class="bottom-nav" id="main-nav" style="display:none;">
        <button class="nav-btn active" onclick="switchTab('dungeon')">
            <i data-lucide="castle" style="width: 20px; height: 20px;"></i>
            <span>MASMORRA</span>
        </button>
        <button class="nav-btn" onclick="switchTab('tavern')">
            <i data-lucide="shopping-bag" style="width: 20px; height: 20px;"></i>
            <span>TAVERNA</span>
        </button>
        <button class="nav-btn" onclick="switchTab('history')">
            <i data-lucide="scroll-text" style="width: 20px; height: 20px;"></i>
            <span>HISTÓRICO</span>
        </button>
        <button class="nav-btn" onclick="hardReset()">
            <i data-lucide="rotate-ccw" style="width: 20px; height: 20px;"></i>
        </button>
    </nav>


    <script src="assets/js/app.js" defer></script>
</body>
</html>
